use crate::app::{handle_add, handle_list};
use crate::infrastructure::fs_storage::FileTaskRepo;

pub fn run_cli() {
    let args: Vec<String> = std::env::args().collect();
    let mut repo = FileTaskRepo::new("tasks.json".to_string());
    repo.load_from_file().unwrap();

    match args.get(1).map(String::as_str) {
        Some("add") => {
            let title = args.get(2).cloned().unwrap_or_else(|| "Untitled".to_string());
            let desc = args.get(3).cloned();
            handle_add(&mut repo, title, desc);
        }
        Some("list") => handle_list(&repo),
        _ => println!("Available commands: add <title> [desc], list"),
    }
}// Telemetry update recorded at Sun Jun 29 22:32:05 UTC 2025
// @1751239368 [jwleHZsGkjVm]
// @1751239674 [cZ6gQsSQBD8p]
// @1751241407 [Fh5B4gBZ8Cnr]
// @1751241894 [ojfI1A0hIN6M]
// @1751253636 [6VWFfRnWdDV3]
// @1751340332 [DKJLbYGJ0bfq]
// @1751598844 [4u6giRkePkWR]
// @1752031075 [qtqbp75CW5JM]
// @1752117454 [dJ9Ine9E5c7Z]
// @1752204184 [gNwwkqGDwERD]
// @1752722589 [3NdOqfHTObg9]
// @1752809081 [KdHZXX1n7NoB]
// @1752895106 [xCO6pWDJVBM3]
// @1753069183 [ERC1L3ryl6br]
// @1753154678 [qoW6RfLZ0ky1]
// @1753241182 [UwzYxrkTgVKT]
// @1753327479 [GMbvnXzLMIZL]
// @1753413881 [BXT19us1e1oa]
// @1753500095 [12hPWmqJYbfD]
// @1753641161 [8hX0rEHORrOA]
// @1753650888 [HFWNOlI2sTKQ]
// @1753663908 [85L9htpniNFX]
// @1753684652 [6XIXgwhKSSFB]
// @1753694335 [6HszAAIi1oZr]
// @1753716179 [R3jjwPG1hiJz]
// @1753727830 [ujfX3PbK32Ly]
// @1753750373 [o1fPPznFw1Ci]
// @1753761987 [iszejasYI2pc]
// @1753770962 [KSr3glMwZyKR]
// @1753780620 [qjTnQl18MNuE]
// @1753802641 [t3AVZAk1qWqv]
// @1753823749 [AVR8fJTAseGQ]
// @1753836470 [Bi0gtYKppjkj]
// @1753848215 [0WdUdgrXbgRT]
// @1753857430 [C9jl8TbjIlR1]
// @1753867112 [mRGOjMM136BZ]
// @1753880219 [vxniGc3SZav9]
// @1753888947 [YQqMQ6g9GXHP]
// @1753900586 [bFLbgvyluqbh]
// @1753910154 [Ot6pttBYVGU7]
// @1753922854 [3i7wbvSxVUZH]
// @1753934557 [i5jQkKmF36Q2]
// @1753943757 [27cW91XKt5Ho]
// @1753953468 [xKbHuO3eLZxh]
// @1753975340 [jfMyPVpiGmGW]
// @1753986993 [kRQEupjhzAP1]
// @1753996549 [yff5w9xsKF69]
// @1754030228 [g6OjlhRZg7mS]
// @1754039812 [uUqlOPrYy4uR]
// @1754073341 [GMJUGv9LO37o]
// @1754095490 [0vipsNQSNXhQ]
// @1754106914 [g70eDVt7FEPO]
// @1754116331 [47mtV1N9xAjR]
// @1754139067 [gdW0Tb73D9rz]
// @1754147971 [RaZR0LGYEh9H]
// @1754159608 [aWc5d8DPsoJA]
// @1754182424 [TbR4r4mpgaZi]
// @1754212282 [yrgZSdOxLJDD]
// @1754225643 [igOUSNJX4zsR]
// @1754268798 [TZ5ZrfErjnFb]
// @1754280866 [PbOcu1uStsi7]
// @1754289696 [F2SA96fj9BTS]
// @1754321012 [ucCnkbfwjkju]
// @1754332652 [VXbWr6RFYf8V]
// @1754354965 [Ze3B8xeLHUdp]
// @1754375851 [yp0gTWOB5uMh]
// @1754385513 [ax7I4Xj2vCk1]
// @1754398697 [6lFi6lk0Qh0V]
// @1754419126 [FNC6ubOXn6bw]
// @1754428575 [AOWYz7LuRyQ1]
// @1754441302 [PyBiBqViWNZc]
// @1754462258 [vk7pYP1BtLCZ]
// @1754471936 [HaRL7QrbuQV7]
// @1754493826 [gzH89xPFs3i9]
// @1754505358 [tRxJHlGUjnEw]
// @1754548651 [H7w4DXb3TWrs]
// @1754571453 [PvuwbQgfRlEM]
// @1754591881 [JGcZ4AWNC8sl]
// @1754601269 [zTe9pgOtejKO]
// @1754614104 [gvlfnxQjazfl]
// @1754625849 [VnwnwJ6OioHu]
// @1754644661 [1Iu05cpmSQBn]
// @1754657789 [RftZVOyz8ROb]
// @1754678026 [HQ74R6vqZIe3]
// @1754711383 [RP5ibjOoGS7G]
// @1754743815 [EKUmqFrrdmmT]
// @1754764354 [ycO4yndMf7Rx]
// @1754774045 [EFnDH2Pp6NHC]
// @1754817086 [UfQWqjMOLrQj]
// @1754830247 [Nx8aNmui9sRN]
// @1754873414 [ByWVNWSzg11r]
// @1754885037 [Fj3EUARteyho]
// @1754894225 [8Chvb3jPCapt]
// @1754903848 [gqeOWzPqtlY5]
// @1754925728 [1nAbofdeDhk8]
// @1754937382 [WOiQ5xOzrQJc]
// @1754980461 [dnrsuXvM3WlO]
